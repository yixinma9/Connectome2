C2=/autofs/space/linen_001/users/Yixin/mag_20230925_process/combined/p3_topup/b0s_topup_mean.nii.gz
C1=/autofs/space/rhapsody_001/users/le/AxCaliber/Tract_HC_078/magnitude/dwi_b0s_avg.nii.gz

cd /autofs/space/rhapsody_001/users/le/AxCaliber/Tract_HC_078/magnitude/
/usr/pubsw/packages/ANTS/2.4.4/bin/antsRegistrationSyNQuick.sh -d 3 -t a -f ${C2} \
-m ${C1} -o Ants_C1_to_C2_ -n 8

for metric in {DeR,f,fcsf,r};do
C1=/autofs/space/rhapsody_001/users/le/AxCaliber/Tract_HC_078/magnitude/smt_axcaliber_SS0_mcmc_20_p0r5/${metric}.nii
C1_output=/autofs/space/linen_001/users/Yixin/mag_20230925_process/combined/c1/${metric}.nii 
/usr/pubsw/packages/ANTS/2.4.4/bin/antsApplyTransforms \
-d 3 \
-i ${C1} \
-r ${C2} \
-t Ants_C1_to_C2_0GenericAffine.mat \
-o ${C1_output}  
done

antsApplyTransforms \
  -d 3 \
  -i movingImage.nii.gz \
  -r fixedImage.nii.gz \
  -t movingToFixed_0GenericAffine.mat \
  -o movingToFixedDeformed.nii.gz
